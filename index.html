<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Styled VEF Vis</title>
    <!-- <h1>link to video here :https://www.youtube.com/watch?v=AfV1Pg_qNu4&ab_channel=Onlinewebustaad</h1> -->
    <link rel="stylesheet" href="common.css">
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <!-- <script
    src="https://code.jquery.com/jquery-3.5.1.js"
    ></script> -->
    <script src ="common.js"></script>
    <script src = "..//jquery.scrollex.js"></script>

    <!-- vegalite 5 -->
    <script src="https://cdn.jsdelivr.net/npm/vega@5.20.2"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.17.0"></script>

    <!-- vegalite 4 -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/vega@5.17.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@4.17.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.12.2"></script> -->

    <script src="https://d3js.org/d3.v6.min.js"></script>
        <script src="https://unpkg.com/topojson@3"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega@5.17.0"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega-lite@5.1.0"></script>
        <script src="https://cdn.jsdelivr.net/npm/vega-embed@6.12.2"></script>



        <script src="main.js" defer type="module"></script>
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/milligram/1.4.1/milligram.css"
        />
        <link rel="stylesheet" href="style.css">
        <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css2?family=Ubuntu+Condensed&display=swap" />
    <style>

        html,body{
            height: 100%;
            font-family: tahoma;
        }

        #main{
            height: 100%;
            padding: 0;
        }

        .item{
            position: relative;
            height: 100%;
            text-align: center;
        }  

        .item:before{
            content:'';
            display: inline-block;
            height: 100%;
            vertical-align: middle;
        }

        .item .container{
            display: inline-block;
            vertical-align: middle;
            perspective: 900px;
        }

        .item .container > :last-child{
            margin-bottom: 0;
        }

        .item .container .title{
            display: inline-block;
            background: white;
            padding: 0.9em 2em;
            border-radius: 0.25em;
            font-size: 1.5em;
            margin: 0 0 1.5em 0;
            transform-origin: 50% 50%;
        }

        .item .container p{
            font-size: 1.0em;
            line-height:1.0em;
            margin: 0;
        }

        .item .next{
            position:absolute;
            bottom: 2.5em;
            left: 50%;
            width: 5em;
            height: 5em;
            margin-left: -2.5em;
            line-height: 5em;
            border-radius: 100%;
            color: white;
            text-decoration: none;
            border: solid 1px white;
        }

        #header{
            background-color: #111d36;
            font-size: 1.5em;
        }

        #header .title{
            background-color: #111d36;
        }
        
        #one{
            background-color:#111d36;
        }

        #one .title{
            color: #111d36;
        }

        #two{
            background-color:#111d36;
        }

        #two .title{
            color: #111d36;
        }

        #three{
            background-color: #111d36;
        }

        #three .title{
            color: #111d36;
        }

        #four{
            background-color: grey;
        }

        #four .title{
            color: grey;
        }

        /* button style */
        .dropbtn {
            background-color: #3498DB;
            color: white;
            padding: 16px;
            font-size: 16px;
            border: none;
            cursor: pointer;
        }

        /* .dropbtn:hover, .dropbtn:focus {
            background-color: #2980B9;
        }

        .dropdown {
            position: relative;
            display: inline-block;
        }

        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #f1f1f1;
            min-width: 160px;
            overflow: auto;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
        }

        .dropdown-content a {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }

        .dropdown a:hover {background-color: #ddd;}

        .show {display: block;} */



    </style>

    <script src="../THEME.JS"></script>


</head>
<body>

    <div id="main">
        <header class="item" id="header">
            <div class="container">
                <h1 class="title"> VEF: VISION EDUCATION FOUNDATION</h1>
                <p>
                    Scroll or click 'Start' to see more information
                </p>

            </div>
            <a href="#one" class ="next">Start</a>
        </header>


        <section class="item" id="one">
            <div class="container">
                <h2 class="title">Life Expectancy & Income</h2>
                <p></p>
                <p>
                    Average life expectancy in Nepal ranges from 61.2 to 72.9 years.  
                    Hover over the map to explore how life expectancy and income per capita varies in different regions.
                </p>
                <div class="container">
            

                    <div class="center-items">
                        <div class="chart-container2">
                        </div>
                    </div>
        
                    
        
                    <div class="legend-container">
                        <div><h3 id="temporary-hidden"></h3></div>
                        <h3 class="temporary-hidden">The Scale for Life Expectancy</h3>
                    </div>
                    
                    <div class="chart-container3">
                        <div class="tooltip">
                            <!-- used in regional map -->
                        </div>
                    </div>
                    <button id="reveal">Click to Reveal the Map!</button>
            </div>
            <a href="#two" class="next">Next</a>
        </section>

        <section class="item" id="two">
            <div class="container">
                <h2 class="title">Education</h2>
                <p></p>
                <div id="vis"></div>
                <p>
                    See how Nepal compares to the US and the rest of the world in terms of average years of education.
                    Note the growth for years of education in future years.  Hover over the map to single out line.
                </p>
                <script>
                  // Assign the specification to a local variable vlSpec.
                  var vlSpec = {

                    // ******* chart version 1 *********

                        $schema: "https://vega.github.io/schema/vega-lite/v5.json",
                        data: {url: "compData.csv"},
                        width: 400,
                        height: 300,
                        // background: "#111d36",
                        background:"white",
                        encoding: {x: {field: "Year", type: "temporal"}},
                        layer: [
                            {
                            encoding: {
                                color: {field: "Country", type: "nominal"},
                                y: {field: "Avg Years", type: "quantitative"}
                            },
                            layer: [
                                {mark: "line"},
                                {transform: [{filter: {param: "hover", empty: false}}], mark: "point"}
                            ]
                            },
                                {
                            transform: [{pivot: "Country", value: "Avg Years", groupby: ["Year"]}],
                            mark: "rule",
                            encoding: {
                                opacity: {
                                condition: {value: 0.3, param: "hover", empty: false},
                                value: 0
                                },
                                tooltip: [
                                {field: "Nepal", type: "quantitative"},
                                {field: "USA", type: "quantitative"},
                                {field: "World", type: "quantitative"}
                                ]
                            },
                            params: [{
                                name: "hover",
                                select: {
                                type: "point",
                                fields: ["Year"],
                                nearest: true,
                                on: "mouseover",
                                clear: "mouseout"
                                }
                            }]
                            }
                        ]
                    };

                    // ******  chart version 2 **********

        //             $schema: "https://vega.github.io/schema/vega-lite/v4.json",
        //     description: "Multi-series line chart with labels and interactive highlight on hover.  We also set the selection's initial value to provide a better screenshot",
        //     data: {url: "compData.csv"},
        //     encoding: {
        //         x: {field: "Year", type: "temporal", title: "Year"},
        //         y: {field: "Avg Years", type: "quantitative", title: "Avg Years of Education"},
        //         color: {
        //             condition: {
        //                 selection: "hover",
        //                 field:"Country",
        //                 type:"nominal",
        //                 legend: null
        //             },
        //             value: "grey"
        //         },
        //         opacity: {
        //             condition: {
        //                 selection: "hover",
        //                 value: 1
        //             },
        //         value: 0.2
        //         }
        //     },
        //     layer: [{
        //         description: "transparent layer to make it easier to trigger selection",
        //         selection: {
        //             hover: {
        //                 type: "single",
        //                 on: "mouseover",
        //                 empty: "all",
        //                 fields: ["Country"],
        //                 init: {"Country": "Nepal"}
        //             }
        //         },
        //         mark: {type: "line", strokeWidth: 8, stroke: "transparent"}
        //     }, {
        //     mark: "line"
        //     }, {
        //         encoding: {
        //             x: {aggregate: "max", field: "Year"},
        //             y: {aggregate: {argmax: "Year"}, field: "Avg Years"}
        //         },
        //         layer: [{
        //             mark: {type: "circle"}
        //         }, {
        //             mark: {type: "text", align: "left", dx: 4},
        //             encoding: {text: {field:"Country", type: "nominal"}}
        //         }]
        //     }],
        //     config: {view: {stroke: null}}
        // };
                    
            
                  // Embed the visualization in the container with id `vis`
                  vegaEmbed('#vis', vlSpec);
                </script>
            </div>
            <a href="#three" class="next">Next</a>
        </section>

        <section class="item" id="three">
            <div class="container">
                <h2 class="title">Features Area</h2>
                <p></p>
                <div id="visCircle"></div>

                <label for="data">Choose a year:
                    <select class="year">
                        <option value="1981">1981</option>
                        <option value="1991">1991</option>
                        <option value="2001">2001</option>
                        <option value="2011">2011</option>
                        <option value="2018">2018</option>
                        <option value="select year" selected>Select Year</option>
                    </select>
                </label>
                <div class="result"></div>
                <script>
                    const selectElement = document.querySelector('.year');

                    selectElement.addEventListener('change', (event) => {
                        const result = document.querySelector('.result');
                        // result.textContent = `You chose ${event.target.value}`;
                        if (event.target.value == "1981"){
                            pie1();
                        }
                        if (event.target.value == "1991"){
                            pie2();
                        }
                        if (event.target.value == "2001"){
                            pie3();
                        }
                        if (event.target.value == "2011"){
                            pie4();
                        }
                        if (event.target.value == "2018"){
                            pie5();
                        }

                    });
                </script>
    
                <script>

                    // vega.scheme('basic', ['#f00', '#0f0', '#00f', '#ff0', '#f0f', '#0ff']);

                    function pie1(){
                        var vlSpec = {
                            $schema: "https://vega.github.io/schema/vega-lite/v5.json",
                            description: "A simple radial chart with embedded data.",
                            data: {
                                 values: [90.85,9.15]
                            },
                            background: "#111d36",
                            layer: [{
                               mark: {type: "arc", innerRadius: 40, stroke: "darkgrey"}
                            },{
                               mark: {type: "text", radiusOffset: 10},
                                encoding: {
                                   text: {field: "data", type: "quantitative"}
                               }
                            }],
                            encoding: {
                                theta: {field: "data", type: "quantitative", stack: true},
                                radius: {field: "data", scale: {type: "sqrt", zero: true, rangeMin: 20}},
                                color: {field: "data", type: "nominal", legend: null}
                            },
                            view: {stroke: null}
                        }
                        // Embed the visualization in the container with id `vis`
                        vegaEmbed('#visCircle', vlSpec);
                    }
                    function pie2(){
                        var vlSpec = {
                            $schema: "https://vega.github.io/schema/vega-lite/v5.json",
                            description: "A simple radial chart with embedded data.",
                            data: {
                                values: [82.62,17.38]
                            },
                            background: "#111d36",
                            layer: [{
                                mark: {type: "arc", innerRadius: 40, stroke: "darkgrey"}
                            },{
                                mark: {type: "text", radiusOffset: 10},
                                encoding: {
                                    text: {field: "data", type: "quantitative"}
                                }
                            }],
                            encoding: {
                                theta: {field: "data", type: "quantitative", stack: true},
                                radius: {field: "data", scale: {type: "sqrt", zero: true, rangeMin: 20}},
                                color: {field: "data", type: "nominal", legend: null}
                            },
                            view: {stroke: null}
                        }
                        // Embed the visualization in the container with id `vis`
                        vegaEmbed('#visCircle', vlSpec);
                    }
                    function pie3(){
                        var vlSpec = {
                            $schema: "https://vega.github.io/schema/vega-lite/v5.json",
                            description: "A simple radial chart with embedded data.",
                            data: {
                                values: [65.11,34.89]
                            },
                            background: "#111d36",
                            layer: [{
                                mark: {type: "arc", innerRadius: 40, stroke: "darkgrey"}
                            },{
                                mark: {type: "text", radiusOffset: 10},
                                encoding: {
                                    text: {field: "data", type: "quantitative"}
                                }
                            }],
                            encoding: {
                                theta: {field: "data", type: "quantitative", stack: true},
                                radius: {field: "data", scale: {type: "sqrt", zero: true, rangeMin: 20}},
                                color: {field: "data", type: "nominal", legend: null}
                            },
                            view: {stroke: null}
                        }
                        // Embed the visualization in the container with id `vis`
                        vegaEmbed('#visCircle', vlSpec);
                    }
                    function pie4(){
                        var vlSpec = {
                            $schema: "https://vega.github.io/schema/vega-lite/v5.json",
                            description: "A simple radial chart with embedded data.",
                            data: {
                                values: [51.16,48.84]
                            },
                            background: "#111d36",
                            layer: [{
                                mark: {type: "arc", innerRadius: 40, stroke: "darkgrey"}
                            },{
                                mark: {type: "text", radiusOffset: 10},
                                encoding: {
                                    text: {field: "data", type: "quantitative"}
                                }
                            }],
                            encoding: {
                                theta: {field: "data", type: "quantitative", stack: true},
                                radius: {field: "data", scale: {type: "sqrt", zero: true, rangeMin: 20}},
                                color: {field: "data", type: "nominal", legend: null}
                            },
                            view: {stroke: null}
                        }
                        // Embed the visualization in the container with id `vis`
                        vegaEmbed('#visCircle', vlSpec);
                    }

                    function pie5(){
                        var vlSpec = {
                            $schema: "https://vega.github.io/schema/vega-lite/v5.json",
                            description: "A simple radial chart with embedded data.",
                            data: {
                                values: [59.72,40.28]
                            },
                            background: "#111d36",
                            layer: [{
                                mark: {type: "arc", innerRadius: 40, stroke: "darkgrey"}
                            },{
                                mark: {type: "text", radiusOffset: 10},
                                encoding: {
                                    text: {field: "data", type: "quantitative"}
                                }
                            }],
                            encoding: {
                                theta: {field: "data", type: "quantitative", stack: true},
                                radius: {field: "data", scale: {type: "sqrt", zero: true, rangeMin: 20}},
                                color: {field: "data", type: "nominal", legend: null}
                            },
                            view: {stroke: null}
                        }
                        // Embed the visualization in the container with id `vis`
                        vegaEmbed('#visCircle', vlSpec);
                    }

                </script>
            </div>
            <a href="#four" class="next">Next</a>
        </section>


        <section class="item" id="four">
            <div class="container">
                <h2 class="title">Footer Design</h2>
                <p>
                    Hey hey Heyyyy
                </p>
            </div>
            <a href="#header" class="next">Top</a>
        </section>





    </div>

</body>
</html>
